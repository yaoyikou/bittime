<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <title>Document</title>
</head>
<body>
    <div id="container" class="container">

        <div class="jumbotron">
            <h1>Hello, BitTiming.</h1>
            <p>...</p>
            <p><a class="btn btn-primary btn-lg" href="javascript:void(0)" v-on:click="toBeContinue">Learn more</a></p>
        </div>

    </div>

    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdn.bootcss.com/vue/2.5.9/vue.min.js"></script>
    <script src="https://cdn.bootcss.com/sockjs-client/1.1.4/sockjs.min.js"></script>
    <script src="https://cdn.bootcss.com/vertx/3.5.0/vertx-eventbus.min.js"></script>
    <script>
        (function () {
            var app = new Vue({
                el: "#container",
                data: {

                },
                methods: {
                    toBeContinue: function () {
                        alert("To be continue.");
                    }
                }
            });

            var options = {
                "vertxbus_reconnect_attempts_max": "Infinity", // Max reconnect attempts
                "vertxbus_reconnect_delay_min": 1000, // Initial delay (in ms) before first reconnect attempt
                "vertxbus_reconnect_delay_max": 5000, // Max delay (in ms) between reconnect attempts
                "vertxbus_reconnect_exponent": 2, // Exponential backoff factor
                "vertxbus_randomization_factor": 0.5 // Randomization factor between 0 and 1
            };
            var eb = new EventBus("/eb", options);

            eb.enableReconnect(true);
            eb.onreconnect = function () {
                console.log("reconnected")
            };

            eb.onopen = function () {
                console.log("connected");

                eb.registerHandler('client.test', function(error, message) {
                    if (error) {
                        console.log(error);
                    } else {
                        console.log('received a message: ' + JSON.stringify(message));
                    }
                });
            };
        })();
    </script>
</body>
</html>